<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>🪐 Raiku SlotScope — Deterministic Simulation</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>🪐 Raiku SlotScope</h1>
    <p>Deterministic Simulation — AOT vs JIT Execution (Solana-like)</p>
  </header>

  <div class="controls-wrap">
    <div class="controls">
      <button id="startBtn">🚀 Start Simulation</button>
      <label class="radio"><input type="radio" name="mode" value="JIT" checked /> JIT</label>
      <label class="radio"><input type="radio" name="mode" value="AOT" /> AOT</label>
      <label>Scenario:
        <select id="scenario">
          <option value="Normal">Normal</option>
          <option value="HighFee">High Fee</option>
          <option value="Congested">Congested</option>
        </select>
      </label>
      <label>TX Count: <input id="txCount" type="number" value="100" min="1" /></label>
      <label class="checkbox"><input id="autoRun" type="checkbox" /> Auto-run</label>
      <button id="compareBtn">📊 So sánh JIT & AOT</button>
      <button id="resetBtn">🔄 Reset</button>
    </div>
  </div>

  <div id="slots" class="slots-container" aria-live="polite"></div>

  <section class="panel blueprint">
    <h2>🍀 Deterministic Execution Blueprint</h2>
    <div class="steps">
      <div class="step">👤<br/>User<br/>Submit TX</div>
      <div class="arrow">→</div>
      <div class="step">🧠<br/>Raiku Node<br/>AOT / JIT Scheduling</div>
      <div class="arrow">→</div>
      <div class="step">⏱<br/>Slot Reservation<br/>Guaranteed Order</div>
      <div class="arrow">→</div>
      <div class="step">☀️<br/>Solana Chain<br/>Deterministic Execution</div>
      <div class="arrow">→</div>
      <div class="step">✅<br/>TX Confirmed<br/>Finality</div>
    </div>

    <div class="legend-dots">
      <span class="dot green"></span> Executed
      <span class="dot yellow"></span> Pending
      <span class="dot red"></span> Failed
    </div>

    <div class="chart-row">
      <div class="chart tx-chart">
        <canvas id="txChart"></canvas>
        <div class="chart-legend-dots">
          <span class="small-dot green"></span><span>Executed</span>
          <span class="small-dot yellow"></span><span>Pending</span>
          <span class="small-dot red"></span><span>Failed</span>
        </div>
      </div>

      <div class="chart gas-chart">
        <canvas id="gasChart"></canvas>
      </div>
    </div>
  </section>

  <div class="stats" aria-live="polite">
    <div class="stat"><div class="stat-title">Executed TX</div><div id="executedVal" class="stat-val">0</div></div>
    <div class="stat"><div class="stat-title">Failed TX</div><div id="failedVal" class="stat-val">0</div></div>
    <div class="stat"><div class="stat-title">Pending TX</div><div id="pendingVal" class="stat-val">0</div></div>
    <div class="stat"><div class="stat-title">JIT Gas (SOL)</div><div id="jitGasVal" class="stat-val">0.00000</div></div>
    <div class="stat"><div class="stat-title">AOT Gas (SOL)</div><div id="aotGasVal" class="stat-val">0.00000</div></div>
    <div class="stat"><div class="stat-title">Total Gas (SOL)</div><div id="totalGasVal" class="stat-val">0.00000</div></div>
  </div>

  <!-- compare popup (hidden) -->
  <div id="comparePopup" class="compare-popup hidden" role="dialog" aria-modal="true">
    <div class="popup-content">
      <h3>So sánh JIT vs AOT</h3>
      <canvas id="compareChart" width="420" height="260"></canvas>
      <div id="compareSummary" class="compare-summary"></div>
      <div style="margin-top:10px;">
        <button id="closeCompare">Đóng</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
